var postsData = [
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273b64001fa6292caefc7605550", 
        trackName: "The Perfect Red Velvet",
        artist: "Red Velvet",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "kiwidoms", 
        userLink: "home.html",
        reviewDate: "January 26, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Contemporary R&B",
        title: "Cool Arbum!",
        likes: 10,
        dislikes: 10,
        comments: 10,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://upload.wikimedia.org/wikipedia/en/5/51/Stray_Kids_-_Rock-Star.png", 
        trackName: "Rock-Star",
        artist: "Stray Kids",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 3, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Rock",
        title: "Just feel the rock!",
        likes: 100,
        dislikes: 10,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273adbc64e70fdf990fb432c14a", 
        trackName: "Habit",
        artist: "SEKAI NO OWARI",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 4, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 30, 2024",
        tag1: "Album",
        tag2: "J-Pop",
        tag3: "Indie",
        title: "The title track was cool.",
        likes: 5,
        dislikes: 16,
        comments: 30,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d00001e0220f991e95301877ab21155a0", 
        trackName: "Wife",
        artist: "(G)I-DLE",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "marblemelon", 
        userLink: "home.html",
        reviewDate: "February 14, 2024",
        tag1: "Track",
        tag2: "K-Pop",
        tag3: "Hip Hop",
        title: "Taste is cocoloco",
        likes: 5,
        dislikes: 0,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273b64001fa6292caefc7605550", 
        trackName: "The Perfect Red Velvet",
        artist: "Red Velvet",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "kiwidoms", 
        userLink: "home.html",
        reviewDate: "January 26, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Contemporary R&B",
        title: "Cool Arbum!",
        likes: 10,
        dislikes: 10,
        comments: 10,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://upload.wikimedia.org/wikipedia/en/5/51/Stray_Kids_-_Rock-Star.png", 
        trackName: "Rock-Star",
        artist: "Stray Kids",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 3, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Rock",
        title: "Just feel the rock!",
        likes: 100,
        dislikes: 10,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273adbc64e70fdf990fb432c14a", 
        trackName: "Habit",
        artist: "SEKAI NO OWARI",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 4, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 30, 2024",
        tag1: "Album",
        tag2: "J-Pop",
        tag3: "Indie",
        title: "The title track was cool.",
        likes: 5,
        dislikes: 16,
        comments: 30,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d00001e0220f991e95301877ab21155a0", 
        trackName: "Wife",
        artist: "(G)I-DLE",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "marblemelon", 
        userLink: "home.html",
        reviewDate: "February 14, 2024",
        tag1: "Track",
        tag2: "K-Pop",
        tag3: "Hip Hop",
        title: "Taste is cocoloco",
        likes: 5,
        dislikes: 0,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273b64001fa6292caefc7605550", 
        trackName: "The Perfect Red Velvet",
        artist: "Red Velvet",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "kiwidoms", 
        userLink: "home.html",
        reviewDate: "January 26, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Contemporary R&B",
        title: "Cool Arbum!",
        likes: 10,
        dislikes: 10,
        comments: 10,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://upload.wikimedia.org/wikipedia/en/5/51/Stray_Kids_-_Rock-Star.png", 
        trackName: "Rock-Star",
        artist: "Stray Kids",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 3, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Rock",
        title: "Just feel the rock!",
        likes: 100,
        dislikes: 10,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273adbc64e70fdf990fb432c14a", 
        trackName: "Habit",
        artist: "SEKAI NO OWARI",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 4, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 30, 2024",
        tag1: "Album",
        tag2: "J-Pop",
        tag3: "Indie",
        title: "The title track was cool.",
        likes: 5,
        dislikes: 16,
        comments: 30,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d00001e0220f991e95301877ab21155a0", 
        trackName: "Wife",
        artist: "(G)I-DLE",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "marblemelon", 
        userLink: "home.html",
        reviewDate: "February 14, 2024",
        tag1: "Track",
        tag2: "K-Pop",
        tag3: "Hip Hop",
        title: "Taste is cocoloco",
        likes: 5,
        dislikes: 0,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273b64001fa6292caefc7605550", 
        trackName: "The Perfect Red Velvet",
        artist: "Red Velvet",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "kiwidoms", 
        userLink: "home.html",
        reviewDate: "January 26, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Contemporary R&B",
        title: "Cool Arbum!",
        likes: 10,
        dislikes: 10,
        comments: 10,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://upload.wikimedia.org/wikipedia/en/5/51/Stray_Kids_-_Rock-Star.png", 
        trackName: "Rock-Star",
        artist: "Stray Kids",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 3, 2024",
        tag1: "Album",
        tag2: "K-Pop",
        tag3: "Rock",
        title: "Just feel the rock!",
        likes: 100,
        dislikes: 10,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d0000b273adbc64e70fdf990fb432c14a", 
        trackName: "Habit",
        artist: "SEKAI NO OWARI",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 4, 
        user: "crimson", 
        userLink: "home.html",
        reviewDate: "January 30, 2024",
        tag1: "Album",
        tag2: "J-Pop",
        tag3: "Indie",
        title: "The title track was cool.",
        likes: 5,
        dislikes: 16,
        comments: 30,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://i.scdn.co/image/ab67616d00001e0220f991e95301877ab21155a0", 
        trackName: "Wife",
        artist: "(G)I-DLE",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 5, 
        user: "marblemelon", 
        userLink: "home.html",
        reviewDate: "February 14, 2024",
        tag1: "Track",
        tag2: "K-Pop",
        tag3: "Hip Hop",
        title: "Taste is cocoloco",
        likes: 5,
        dislikes: 0,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    },
    {
        cover: "https://upload.wikimedia.org/wikipedia/en/b/b0/Glass_Animals_-_Heat_Waves.png", 
        trackName: "Heat Waves",
        artist: "Glass Animals",
        trackLink: "home.html",
        artistLink: "home.html",
        rating: 3, 
        user: "hannipham", 
        userLink: "profile-hanni.html",
        reviewDate: "February 5, 2024",
        tag1: "Track",
        tag2: "Shiver Pop",
        tag3: "Indie Rock",
        title: "Heat Waves been faking me out",
        likes: 0,
        dislikes: 0,
        comments: 5,
        postText: " Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer finibus elit lectus, at bibendum enim varius nec. Aenean dui erat, dictum eu vestibulum viverra, ullamcorper at nunc. Curabitur sit amet pellentesque sem. Cras imperdiet venenatis nunc in vehicula. Fusce vestibulum lacinia rutrum. Etiam faucibus porta dolor, in molestie erat aliquet in. Etiam cursus commodo convallis. Vestibulum nec quam felis. Phasellus id interdum velit. Fusce non finibus turpis. Sed interdum eros condimentum aliquet auctor. Pellentesque blandit ut est sed lobortis. Nam hendrerit aliquet mauris eget porttitor. Donec semper eu nulla at dictum.",
        
    }
];

var userData = [
    {
        profilePicture: "https://i.pinimg.com/736x/ed/42/34/ed4234840e9d633c60a64c956bb6a629.jpg",
        username: "hannipham",
        postsLiked: [],
        postsDisliked: [],
        password: "hanni2009",
        profileLink: "profile-hanni.html"
    },
    {
        profilePicture: "https://qph.cf2.quoracdn.net/main-qimg-468531bd9031bbc43980b8db0ea5fa75-lq",
        username: "kiwidoms",
        postsLiked: [],
        postsDisliked: [],
        password: "wiwidoms04",
        profileLink: "home.html"
    }
];

var likeDislikeArray = [];
var postInfo = [];

var logoBar = document.getElementById('logo-bar');

logoBar.style.cursor = 'pointer';

logoBar.addEventListener('click', function() {
    window.location.href = '../html/home.html';
});

var userBar = document.getElementById('user-bar');

function createPost(postData, idNumber) {
    const postDiv = document.createElement('div');
    postDiv.className = "post";

    var ratings = [];


    for (let i = 0; i < postData.rating; i++) {
        ratings.push('../svg/star.svg');
    }
    for (let i = 0; i < 5 - postData.rating; i++) {
        ratings.push('../svg/star-empty.svg');
    }

    postDiv.id = "post-" + idNumber;
    postDiv.innerHTML = `
      <div class="post-header">
        <a></a>
        <img class="cover" src="${postData.cover}">
        <div class="post-titles">
          <p class="song-album-title"><a href="${postData.trackLink}">${postData.trackName}</a></p>
          <p class="artist"><a href="${postData.artistLink}">${postData.artist}</a></p>
          <div class="rating">
            <img src=${ratings[0]}>
            <img src=${ratings[1]}>
            <img src=${ratings[2]}>
            <img src=${ratings[3]}>
            <img src=${ratings[4]}>
          </div>
          <p class="user-reviewed">reviewed by <a href="${postData.userLink}" class="user">${postData.user}</a> on <span class="date">${postData.reviewDate}</span></p>
            <div class="tags-area">
              <div class="tag">
                <p>${postData.tag1}</p>
            </div>
            <div class="tag">
                <p>${postData.tag2}</p>
            </div>
            <div class="tag">
                <p>${postData.tag3}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="post-body">
        <p class="post-title">${postData.title}</p>
        <p class="post-text">${postData.postText} <a href="#" class="see-more"> See more...</a></p>
      </div>

      <div class="post-footer">
        <div id="likes-bar" class="react-bar">
            <input type="image" class="like" src="../svg/thumbs-up-stroke.svg">
            <p id="like-counter" class="counter">${postData.likes}</p>
        </div>

        <div id="dislikes-bar" class="react-bar">
            <input type="image" class="dislike" src="../svg/thumbs-up-stroke.svg">
            <p id="dislike-counter" class="counter">${postData.dislikes}</p>
        </div>

        <div id="comments-bar" class="react-bar">
            <input type="image" class="comment" src="../svg/comment.svg">
            <p id="comment-counter" class="counter">${postData.comments}</p>
        </div>
      </div>
    `;

    return postDiv;
}

function removeAllChildNodes(parent) {
    while (parent.firstChild) {
        parent.removeChild(parent.firstChild);
    }
}

var postsArray = [];

function assignId() {
    for (let i = 0; i < postsData.length; i++) {
        var postDiv = createPost(postsData[i], i);

        var likeButton = postDiv.querySelector('.like');
        var dislikeButton = postDiv.querySelector('.dislike');

        likeButton.id = 'like-' + i;
        dislikeButton.id = 'dislike-' + i;

        var likeDislike = {
            clickedLike: false,
            clickedDislike: false,
            likeAfter: false,
            dislikeAfter: false
        };

        var likes = parseInt(postsData[i].likes);

        var dislikes = parseInt(postsData[i].dislikes);

        var reacts = {
            likeCount: likes,
            dislikeCount: dislikes,
            date: '1970-01-01'
        };

        likeDislikeArray.push(likeDislike);
        reacts.date = getPostDate(postsData[i].reviewDate);
        postInfo.push(reacts);
        
        likeButton.setAttribute('onclick', 'likeWrapper(' + i + ')');
        dislikeButton.setAttribute('onclick', 'dislikeWrapper(' + i + ')');

        postsArray.push(postDiv);
    }
}

function loadPosts(loadedPosts) {
    const postArea = document.getElementById("post-area");
    removeAllChildNodes(postArea);

    for (let i = 0; i < loadedPosts; i++) {
        postArea.appendChild(postsArray[i]);
    }
}

var loadedPosts = 15;

var userLoggedIn = JSON.parse(localStorage.getItem("userLoggedIn"));

document.addEventListener('DOMContentLoaded', function() {
    updateLoginStatus(JSON.parse(localStorage.getItem("userLoggedIn")));
    assignId();

    highlightSort();

    sortPostsRecent();

    if (postsData.length < 15) {
        loadedPosts = postsData.length;
    }
    loadPosts(loadedPosts);

    
    var createPostBar = document.getElementById('create-post');
    var savedState = localStorage.getItem('createPostState');

    if (savedState) {
        createPostBar.style.display = savedState;
    }

    const feed = document.getElementById("feed");
    var loadMore = document.createElement('button');
    loadMore.className = "load-more";
    loadMore.innerHTML = `<span>Load more posts</span> 
                            <span>+</span>`;
    feed.appendChild(loadMore);
    
    loadMore.addEventListener('click', function() {
        if (postsData.length - loadedPosts < 15) {
            loadedPosts = loadedPosts + (postsData.length - loadedPosts);
        }
        else {
            loadedPosts += 15;
        }
        loadPosts(loadedPosts);
    });
});

function getProfilePicture(username) {
    for (let i = 0; i < userData.length; i++) {
        if (userData[i].username === username) {
            console.log(userData[i].profilePicture);
            return userData[i].profilePicture;
        }
    }

    return null;
}

function getPostDate(dateString) {
    var dateObject = new Date(dateString);
    return dateObject;
}

function sortPostsRecent() {
    postsArray.sort(function(a, b) {
        var compA = getPostDate(a.querySelector(".date").innerHTML);
        var compB = getPostDate(b.querySelector(".date").innerHTML);

        if (compA < compB) {
            return 1;
        }
        else if (compA > compB) {
            return -1;
        }
        else {
            return 0;
        }
    });
    loadedPosts = 15;
    loadPosts(loadedPosts);
}

function sortPostsPopular() {
    postsArray.sort(function(a, b) {
        var compA = parseInt(a.querySelector('#like-counter').innerHTML);
        var compB = parseInt(b.querySelector('#like-counter').innerHTML);

        if (compA < compB) {
            return 1;
        }
        else if (compA > compB) {
            return -1;
        }
        else {
            return 0;
        }
    });
    loadedPosts = 15;
    loadPosts(loadedPosts);
}

function highlightSort() {
    const containers = document.querySelectorAll('.sort-option');

    const recent = document.getElementById('recent');
    recent.querySelector('.text').classList.add('clicked');
    recent.querySelector('.image').classList.add('clicked');

    containers.forEach(container => {
        const image = container.querySelector('.image');
        const paragraph = container.querySelector('.text');

        container.addEventListener('click', function() {
            
            containers.forEach(c => {
                c.querySelector('.text').classList.remove('clicked');
                c.querySelector('.image').classList.remove('clicked');
            });

            paragraph.classList.add('clicked');
            image.classList.add('clicked');
        });
    });
}

const popular = document.getElementById('popular');

popular.addEventListener('click', function() {
    sortPostsPopular();
});

const recent = document.getElementById('recent');

recent.addEventListener('click', function() {
    sortPostsRecent();
});

function logOut() {
    localStorage.setItem("isLoggedIn", false);
}

function updateLoginStatus(user) {
    var isLoggedIn = localStorage.getItem('isLoggedIn');
    var createPostBar = document.getElementById('create-post');

    if (isLoggedIn === 'true') {
        createPostBar.querySelector("#profile-picture-post").src = JSON.parse(localStorage.getItem("profilePicture"));
        userBar.innerHTML = `<div class='profile-pic-holder'> 
                                <a class="profile-picture" href="${JSON.parse(localStorage.getItem("userLoggedIn")).profileLink}"><img src="${JSON.parse(localStorage.getItem("profilePicture"))}"></a>
                             </div>
                             <a href="home.html" class="logged-status" id="log-out" onclick="logOut();">log out</a>`;
        createPostBar.style.display = 'flex';

    } else {
        userBar.innerHTML = `<a href="login.html" class="logged-status" id="log-in" class="log-in"">log in</a>
                            <p>|</p>
                            <a href="signup.html" class="logged-status" id="sign-up" class="sign-up">sign up<a>`;
        createPostBar.style.display = 'none';
    }
}

var posts = document.querySelectorAll(".post-footer");

function closeLoginPopup() {
    let popUp = document.getElementById("login-popup");
    popUp.style.display = 'none';
}

function likeWrapper(postNumber) {
    let popUp = document.getElementById("login-popup");

    var isLoggedIn = localStorage.getItem('isLoggedIn');
    if (isLoggedIn === 'true') {
        popUp.style.display = 'none';
        like(postNumber, likeDislikeArray);
    }
    else {
        popUp.style.display = 'block';
        console.log("You need to log in");
    }
}

function dislikeWrapper(postNumber) {
    let popUp = document.getElementById("login-popup");
    
    var isLoggedIn = localStorage.getItem('isLoggedIn');
    if (isLoggedIn === 'true') {
        popUp.style.display = 'none';
        dislike(postNumber, likeDislikeArray);
    }
    else {
        popUp.style.display = 'block';
        console.log("You need to log in");
    }
}

function like(postNumber, likeDislikeArray) {

    var postId = "post-" + postNumber;

    var postIndex = postsArray.findIndex(post => post.id === postId);
    
    if (postIndex === -1) {
        console.error("Post not found");
        return;
    }

    if (likeDislikeArray[postNumber].clickedLike == false) {
        likeDislikeArray[postNumber].clickedLike = true;
        likeDislikeArray[postNumber].clickedDislike = false;

        var indexD = userLoggedIn.postsDisliked.findIndex(post => post.id === postId);
        var indexL = userLoggedIn.postsLiked.findIndex(post => post.id === postId);

        if (indexD !== -1) {
            userLoggedIn.postsDisliked.splice(indexD, 1);
        }

        if (indexL === -1) {
            userLoggedIn.postsLiked.push(postsArray[postIndex]);
        }

        console.log('like 1');
    } else if (likeDislikeArray[postNumber].clickedLike == false || (likeDislikeArray[postNumber].clickedLike == false && likeDislikeArray[postNumber].clickedDislike == true)) {
        likeDislikeArray[postNumber].clickedDislike = false;
        likeDislikeArray[postNumber].clickedLike = true;

        var indexD = userLoggedIn.postsDisliked.findIndex(post => post.id === postId);
        var indexL = userLoggedIn.postsLiked.findIndex(post => post.id === postId);

        if (indexD !== -1) {
            userLoggedIn.postsDisliked.splice(indexD, 1);
        }

        if (indexL === -1) {
            userLoggedIn.postsLiked.push(postsArray[postIndex]);
        }

        console.log('like 2');
    } else if (likeDislikeArray[postNumber].clickedLike == true) {
        likeDislikeArray[postNumber].clickedLike = false;

        var indexL = userLoggedIn.postsLiked.findIndex(post => post.id === postId);

        if (indexL !== -1) {
            userLoggedIn.postsLiked.splice(indexL, 1);
        }

        console.log('like 3');
    }

    console.log('clicked like: ' + likeDislikeArray[postNumber].clickedLike);
    updateReactButtons(postNumber);
    disLikeCounter(postNumber, likeDislikeArray);

    console.log(userLoggedIn.postsLiked);
    console.log(userLoggedIn.postsDisliked);
}


function dislike(postNumber, likeDislikeArray) {
    var postId = "post-" + postNumber;

    var postIndex = postsArray.findIndex(post => post.id === postId);
    
    if (postIndex === -1) {
        console.error("Post not found");
        return;
    }

    if (likeDislikeArray[postNumber].clickedDislike == false) {
        likeDislikeArray[postNumber].clickedDislike = true;
        likeDislikeArray[postNumber].clickedLike = false;

        var indexD = userLoggedIn.postsDisliked.findIndex(post => post.id === postId);
        var indexL = userLoggedIn.postsLiked.findIndex(post => post.id === postId);

        if (indexL !== -1) {
            userLoggedIn.postsLiked.splice(indexD, 1);
        }

        if (indexD === -1) {
            userLoggedIn.postsDisliked.push(postsArray[postIndex]);
        }

    } else if (likeDislikeArray[postNumber].clickedDislike == false || (likeDislikeArray[postNumber].clickedDislike == false && likeDislikeArray[postNumber].clickedLike == true)) {
        likeDislikeArray[postNumber].clickedLike = false;
        likeDislikeArray[postNumber].clickedDislike = true;

        var indexD = userLoggedIn.postsDisliked.findIndex(post => post.id === postId);
        var indexL = userLoggedIn.postsLiked.findIndex(post => post.id === postId);

        if (indexL !== -1) {
            userLoggedIn.postsLiked.splice(indexD, 1);
        }

        if (indexD === -1) {
            userLoggedIn.postsDisliked.push(postsArray[postIndex]);
        }

    } else if (likeDislikeArray[postNumber].clickedDislike == true) {
        likeDislikeArray[postNumber].clickedDislike = false;

        var indexD = userLoggedIn.postsDisliked.findIndex(post => post.id === postId);

        if (indexD !== -1) {
            userLoggedIn.postsDisliked.splice(indexD, 1);
        }
    }

    updateReactButtons(postNumber);
    disLikeCounter(postNumber, likeDislikeArray);

    console.log(userLoggedIn.postsLiked);
    console.log(userLoggedIn.postsDisliked);
}

function updateReactButtons(postNumber) {
    var postId = "post-" + postNumber;

    var like = document.getElementById('like-' + postNumber);
    var dislike = document.getElementById('dislike-' + postNumber);

    var index = postsArray.findIndex(post => post.id === postId);   

    if (userLoggedIn.postsDisliked.includes(postsArray[index])) {
        dislike.src = '../svg/thumbs-up.svg';
    }
    else if (userLoggedIn.postsLiked.includes(postsArray[index])) {
        like.src = '../svg/thumbs-up.svg';
    }
    
    if (!(userLoggedIn.postsDisliked.includes(postsArray[index]))) {
        dislike.src = '../svg/thumbs-up-stroke.svg';
    }
    
    if (!(userLoggedIn.postsLiked.includes(postsArray[index]))) {
        like.src = '../svg/thumbs-up-stroke.svg';
    }

}



function disLikeCounter(postNumber, likeDislikeArray) {
    var likeCounter = document.getElementById('post-' + postNumber).querySelector('#like-counter');
    var likes = parseInt(postsData[postNumber].likes);

    var dislikeCounter = document.getElementById('post-' + postNumber).querySelector('#dislike-counter');
    var dislikes = parseInt(postsData[postNumber].dislikes);

    var postId = "post-" + postNumber;
    var index = postsArray.findIndex(post => post.id === postId); 

    if (userLoggedIn.postsLiked.includes(postsArray[index])) {
        likes++;
        likeDislikeArray[postNumber].likeAfter = true;
        console.log('1');
    }
    else if (userLoggedIn.postsDisliked.includes(postsArray[index])) {
        dislikes++;
        likeDislikeArray[postNumber].dislikeAfter = true;
        console.log('2');
    }

    if (!(userLoggedIn.postsLiked.includes(postsArray[index])) && likes > 0) {
        if (likeDislikeArray[postNumber].likeAfter == true) {
            likes--;
            likeDislikeArray[postNumber].likeAfter = false;
            console.log('3');
        }
    }
    
    if (!(userLoggedIn.postsDisliked.includes(postsArray[index])) && dislikes > 0) {
        if (likeDislikeArray[postNumber].dislikeAfter == true) {
            dislikes--;
            likeDislikeArray[postNumber].dislikeAfter = false;
            console.log('4');
        }
    }


    postsData[postNumber].likes = likes;
    postsData[postNumber].dislikes = dislikes;
    

    likeCounter.innerHTML = likes;
    dislikeCounter.innerHTML = dislikes;

    localStorage.setItem('userData', JSON.stringify(userData));
    var d = JSON.parse(localStorage.getItem('userData'));

    console.log(d[0].postsLiked);
}


function checkRegister() {
    var errorMessage = document.querySelector(".error-message");
    var takenUser = false;
    const username = document.forms["main-form"]["username"].value;
    const password = document.forms["main-form"]["password"].value;
    const confPassword = document.forms["main-form"]["confirm-password"].value;

    let users = JSON.parse(localStorage.getItem("users")) || userData;

    for (let i = 0; i < users.length; i++) {
        if (users[i].username == username) {
            takenUser = true;
        }
    }

    if (username.length < 3) {
        errorMessage.innerHTML = "Username must be more than 3 characters."
        errorMessage.style.visibility = "visible";
        return false;
    }
    else if (takenUser == true) {
        errorMessage.innerHTML = "Username is already taken."
        errorMessage.style.visibility = "visible";
        return false;
    }
    else if (password.localeCompare(confPassword) != 0) {
        errorMessage.innerHTML = "Passwords do not match."
        errorMessage.style.visibility = "visible";
        return false;
    }

    var user = {
        profilePicture: "https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",
        username: username,
        postsLiked: [],
        postsDisliked: [],
        password: password
    };

    userData.push(user);

    localStorage.setItem("users", JSON.stringify(userData));

    errorMessage.style.visibility = "hidden";
    return true;
}

function checkLogin() {
    var errorMessage = document.querySelector(".error-message");
    const username = document.forms["login-form"]["username"].value;
    const password = document.forms["login-form"]["password"].value;

    var userExists = false;
    var userIndex = -1;

    let users = JSON.parse(localStorage.getItem("users")) || userData;

    for (let i = 0; i < users.length; i++) {
        if (users[i].username == username) {
            userExists = true;
            userIndex = i;
        }
    }

    if (userExists != true) {
        errorMessage.innerHTML = "Username does not exist."
        errorMessage.style.visibility = "visible";
        return false;
    }
    else if (users[userIndex].password != password) {
        errorMessage.innerHTML = "Password is incorrect."
        errorMessage.style.visibility = "visible";
        return false;
    }

    localStorage.setItem("userLoggedIn", JSON.stringify(users[userIndex]));
    localStorage.setItem("isLoggedIn", true);
    localStorage.setItem("profilePicture", JSON.stringify(users[userIndex].profilePicture));

    errorMessage.style.visibility = "hidden";
    return true;
}